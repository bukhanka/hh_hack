# 🎯 Двухрежимная платформа агрегации новостей

## Обзор

Платформа теперь поддерживает **два независимых режима работы**:

1. **Financial RADAR** - Система выявления и оценки горячих новостей в финансах
2. **Personal News Aggregator** - Персонализированный агрегатор новостей

Оба режима используют **единую инфраструктуру**: сбор новостей, дедупликацию, базу данных и API.

---

## 🏗️ Архитектура

```
┌─────────────────────────────────────────────────────┐
│           Общая инфраструктура                       │
├─────────────────────────────────────────────────────┤
│  • NewsCollector (RSS + Tavily)                     │
│  • NewsDeduplicator                                  │
│  • Database + History                                │
│  • FastAPI Backend                                   │
└─────────────────────────────────────────────────────┘
                      │
        ┌─────────────┴─────────────┐
        │                           │
   ┌────▼────┐               ┌─────▼──────┐
   │ РЕЖИМ 1 │               │  РЕЖИМ 2   │
   │Financial│               │  Personal  │
   │  RADAR  │               │   News     │
   └─────────┘               └────────────┘
```

### Backend структура:

```
backend/
├── api.py                    # Единый API со всеми эндпоинтами
├── config.py                 # Общие настройки
├── database.py               # База данных
├── models.py                 # Все модели (обоих режимов)
├── news_collector.py         # Общий сборщик RSS
├── deduplication.py          # Общая дедупликация
│
├── modes/
│   ├── financial/            # РЕЖИМ 1: Финансовый RADAR
│   │   ├── __init__.py
│   │   ├── radar.py
│   │   ├── hotness_analyzer.py
│   │   ├── draft_generator.py
│   │   └── deep_researcher.py
│   │
│   └── personal/             # РЕЖИМ 2: Персональный агрегатор
│       ├── __init__.py
│       ├── news_aggregator.py
│       ├── summary_generator.py
│       └── user_preferences.py
```

### Frontend структура:

```
frontend/
├── app/
│   ├── page.tsx              # Главная: выбор режима
│   ├── financial/            # Финансовый режим
│   │   └── page.tsx
│   ├── personal/             # Персональный режим
│   │   └── page.tsx
│   └── history/
│       └── page.tsx
│
├── components/               # Переиспользуемые компоненты
├── lib/
│   ├── api.ts               # radarApi + personalApi
│   └── types.ts             # Все типы
```

---

## 🎨 Режим 1: Financial RADAR

### Что делает:
- Сбор новостей из финансовых RSS и Tavily
- Дедупликация и кластеризация
- **Многомерный анализ "горячести"** (5 метрик)
- Извлечение сущностей (компании, тикеры, сектора)
- Построение timeline событий
- **Автоматический Deep Research** для топовых сюжетов
- Генерация готовых черновиков публикаций

### API эндпоинты:
- `POST /api/process` - Запуск RADAR анализа
- `GET /api/last-result` - Последний результат
- `GET /api/history` - История запусков
- `GET /api/history/{run_id}` - Детали конкретного запуска

### UI:
- `/financial` - Интерфейс финансового RADAR
- Детальные карточки с hotness breakdown
- Таймлайны и entity extraction
- Полные черновики статей

---

## 📰 Режим 2: Personal News Aggregator

### Что делает:
- Сбор новостей из **настраиваемых пользователем RSS источников**
- Дедупликация статей
- **Генерация кратких описаний (2-3 предложения)** с помощью Gemini
- Фильтрация по ключевым словам
- Приоритизация по релевантности
- Управление источниками и настройками

### API эндпоинты:
- `POST /api/personal/scan` - Сканирование ленты
- `GET /api/personal/preferences/{user_id}` - Получить настройки
- `POST /api/personal/preferences` - Сохранить настройки
- `GET /api/personal/sources/popular` - Популярные источники
- `POST /api/personal/sources/add` - Добавить источник
- `DELETE /api/personal/sources/remove` - Удалить источник
- `POST /api/personal/keywords/add` - Добавить ключевое слово
- `DELETE /api/personal/keywords/remove` - Удалить ключевое слово

### UI:
- `/personal` - Интерфейс персонального агрегатора
- Компактные карточки новостей
- Панель настроек источников и фильтров
- Каталог популярных RSS источников
- Управление ключевыми словами

---

## 🚀 Запуск

### Backend:

```bash
cd backend
python run.py
# или
uvicorn api:app --host 0.0.0.0 --port 8000 --reload
```

### Frontend:

```bash
cd frontend
npm run dev
```

### Доступ:
- Главная (выбор режима): http://localhost:3000
- Financial RADAR: http://localhost:3000/financial
- Personal Aggregator: http://localhost:3000/personal

---

## 📊 Сравнение режимов

| Характеристика | Financial RADAR | Personal Aggregator |
|---------------|-----------------|---------------------|
| **Цель** | Анализ горячих финансовых новостей | Персональная лента новостей |
| **Анализ** | Многомерный scoring (5 метрик) | Простая релевантность |
| **Генерация контента** | Полные черновики статей | Краткие описания 2-3 предложения |
| **Источники** | Финансовые RSS + Tavily | Настраиваемые пользователем RSS |
| **Deep Research** | ✅ Да (для топовых) | ❌ Нет |
| **Фильтры** | По hotness threshold | По ключевым словам |
| **Сущности** | ✅ Тикеры, компании, сектора | ❌ Нет |
| **Timeline** | ✅ Да | ❌ Нет |
| **Персонализация** | ❌ Нет | ✅ Полная |

---

## 🎯 Соответствие требованиям HeadHunter

### ✅ Обязательные требования:

1. **Сервис для отслеживания новостей** - ✅ Реализовано в `/personal`
2. **Регулярное обновление ленты** - ✅ Кнопка "Обновить ленту"
3. **Указание источников** - ✅ Управление RSS источниками
4. **Ёмкое описание (2-3 предложения)** - ✅ SummaryGenerator
5. **Простой дизайн и удобный UX** - ✅ Современный UI
6. **Публичный доступ** - ✅ Можно развернуть

### 🌟 Бонусные фичи:

1. **Фильтры** - ✅ По ключевым словам
2. **Настройка источников** - ✅ Полное управление
3. **Кастомизация** - ✅ Персональные настройки
4. **Креативная фича** - ✅ **ДВА РЕЖИМА В ОДНОМ!**
5. **Приоритизация** - ✅ По релевантности
6. **Дедупликация** - ✅ Автоматическая

---

## 🔧 Технологии

### Backend:
- **Python 3.10+**
- **FastAPI** - API фреймворк
- **Google Gemini API** - Анализ и генерация текстов
- **GPT Researcher** - Deep research
- **Tavily API** - Дополнительные новости
- **PostgreSQL** - База данных
- **aiohttp** - Асинхронные HTTP запросы

### Frontend:
- **Next.js 14** - React фреймворк
- **TypeScript** - Типизация
- **Tailwind CSS** - Стилизация
- **Framer Motion** - Анимации
- **Axios** - HTTP клиент
- **Lucide React** - Иконки

---

## 📝 API документация

После запуска backend доступна по адресу:
- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

---

## 🎨 Преимущества архитектуры

1. ✅ **Универсальность** - Два режима на одной платформе
2. ✅ **Переиспользование кода** - Общая инфраструктура
3. ✅ **Модульность** - Легко добавить третий режим
4. ✅ **Масштабируемость** - Режимы независимы
5. ✅ **Демонстрация навыков** - И финансовый анализ, и персонализация

---

## 🚀 Возможности расширения

### Для финансового режима:
- [ ] Интеграция с рыночными данными (котировки)
- [ ] Алерты на критические события
- [ ] Экспорт отчетов в PDF
- [ ] Telegram бот для уведомлений

### Для персонального режима:
- [ ] Аутентификация пользователей
- [ ] Telegram бот для чтения новостей
- [ ] Шаринг настроек между устройствами
- [ ] Email дайджесты
- [ ] Mobile приложение

### Общие:
- [ ] WebSocket для real-time обновлений
- [ ] Расширенная аналитика
- [ ] Экспорт/импорт настроек
- [ ] API rate limiting
- [ ] Кэширование результатов

---

## 📄 Лицензия

MIT
