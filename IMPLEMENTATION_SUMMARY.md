# üìä –†–µ–∑—é–º–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —É–ª—É—á—à–µ–Ω–∏–π Personal News Aggregator

## ‚úÖ –ß—Ç–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ (Backend - –§–∞–∑–∞ 1)

### 1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** (`backend/migrations/001_personal_news_tables.sql`)
–°–æ–∑–¥–∞–Ω–æ 8 —Ç–∞–±–ª–∏—Ü –¥–ª—è –ø–æ–ª–Ω–æ–π –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏:
- `user_profiles` - –ø—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `user_preferences_db` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (sources, keywords, categories)  
- `feed_items` - —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ (—Å —Å—Ç–∞—Ç—É—Å–∞–º–∏ read/liked/saved)
- `user_interactions` - tracking –ø–æ–≤–µ–¥–µ–Ω–∏—è (view duration, scroll depth)
- `reading_sessions` - —Å–µ—Å—Å–∏–∏ —á—Ç–µ–Ω–∏—è –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- `feed_cache` - –∫–µ—à –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- `interest_weights` - –≤–µ—Å–∞ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤ –¥–ª—è ML
- `onboarding_presets` - –ø—Ä–µ—Å–µ—Ç—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞

**+ –ò–Ω–¥–µ–∫—Å—ã, Views, –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø—Ä–µ—Å–µ—Ç—ã**

---

### 2. **SQLAlchemy –º–æ–¥–µ–ª–∏** (`backend/database.py`)
–î–æ–±–∞–≤–ª–µ–Ω–æ 8 ORM –º–æ–¥–µ–ª–µ–π —Å relationships:
- UserProfile ‚Üí UserPreferencesDB, FeedItem, UserInteraction, etc
- Cascade delete
- to_dict() –º–µ—Ç–æ–¥—ã –¥–ª—è API

---

### 3. **Feed Storage Manager** (`backend/modes/personal/feed_storage.py`)
–ü–æ–ª–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ª–µ–Ω—Ç–æ–π:

```python
# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
save_feed_items(user_id, items)  
get_user_feed(user_id, unread_only=True)

# –°—Ç–∞—Ç—É—Å—ã
mark_as_read(user_id, article_id)
toggle_like/dislike/save(user_id, article_id, status)

# Tracking
track_interaction(user_id, article_id, type, duration, scroll_depth)

# –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
get_user_stats(user_id, days=7)
cleanup_old_feed_items(user_id, keep_days=30)
```

---

### 4. **API Endpoints** (`backend/api.py`)
**10 –Ω–æ–≤—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:**

#### –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è:
- `POST /api/personal/interactions/track` - –ø–æ–ª–Ω—ã–π tracking
- `POST /api/personal/feed/mark-read`
- `POST /api/personal/feed/toggle-like`
- `POST /api/personal/feed/toggle-dislike`
- `POST /api/personal/feed/toggle-save`

#### –õ–µ–Ω—Ç–∞:
- `GET /api/personal/feed/get` - –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –ë–î (—Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏)
- `GET /api/personal/stats/{user_id}` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

#### –û–Ω–±–æ—Ä–¥–∏–Ω–≥:
- `GET /api/onboarding/presets` - –ø—Ä–µ—Å–µ—Ç—ã (–¢–µ—Ö–Ω–æ—Ñ–∏–ª, –ë–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ñ–∏, etc)
- `POST /api/onboarding/complete` - –∑–∞–≤–µ—Ä—à–∏—Ç—å setup
- `GET /api/onboarding/status/{user_id}` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å

---

## üìà –£–ª—É—á—à–µ–Ω–∏—è UX

| –ë—ã–ª–æ ‚ùå | –°—Ç–∞–ª–æ ‚úÖ |
|---------|---------|
| Preferences –≤ –ø–∞–º—è—Ç–∏ (—Ç–µ—Ä—è—é—Ç—Å—è) | PostgreSQL (–ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã) |
| –õ–µ–Ω—Ç–∞ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—ë—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑ | –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ feed_items |
| –ù–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π | –ü–æ–ª–Ω—ã–π tracking (duration, scroll) |
| –ù–µ—Ç –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ | 4 –ø—Ä–µ—Å–µ—Ç–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ |
| –ù–µ—Ç —Å—Ç–∞—Ç—É—Å–æ–≤ | read/liked/saved/disliked |
| –ù–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ | –ü–æ–ª–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∑–∞ N –¥–Ω–µ–π |

---

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã –∏–∑ –ø–ª–∞–Ω–∞

### –ü—Ä–æ–±–ª–µ–º–∞ 1: "Preferences —Ç–µ—Ä—è—é—Ç—Å—è"
‚úÖ –†–µ—à–µ–Ω–æ: `user_preferences_db` —Ç–∞–±–ª–∏—Ü–∞

### –ü—Ä–æ–±–ª–µ–º–∞ 2: "–ù–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π"
‚úÖ –†–µ—à–µ–Ω–æ: `user_interactions` + `track_interaction()` API

### –ü—Ä–æ–±–ª–µ–º–∞ 3: "–ù–µ—Ç —É–º–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è"
üîÑ 50%: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ (`interest_weights`), –Ω—É–∂–µ–Ω learning engine

### –ü—Ä–æ–±–ª–µ–º–∞ 4: "–ü–ª–æ—Ö–æ–π –æ–Ω–±–æ—Ä–¥–∏–Ω–≥"
‚úÖ –†–µ—à–µ–Ω–æ: `/api/onboarding/presets` + 4 –≥–æ—Ç–æ–≤—ã—Ö –ø—Ä–µ—Å–µ—Ç–∞

### –ü—Ä–æ–±–ª–µ–º–∞ 5: "–¢–æ–ª—å–∫–æ —Ä—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ"
‚è≥ TODO: Background worker (–§–∞–∑–∞ 3)

### –ü—Ä–æ–±–ª–µ–º–∞ 6: "–õ–µ–Ω—Ç–∞ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è"
‚úÖ –†–µ—à–µ–Ω–æ: `feed_items` —Ç–∞–±–ª–∏—Ü–∞ + `FeedStorageManager`

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –î–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è MVP+ –Ω—É–∂–Ω–æ:

1. **–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é** –∫ –ë–î:
   ```bash
   psql -U postgres -d radar_db -f backend/migrations/001_personal_news_tables.sql
   ```

2. **Frontend –æ–Ω–±–æ—Ä–¥–∏–Ω–≥** (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1):
   - Welcome screen —Å –≤—ã–±–æ—Ä–æ–º –ø—Ä–µ—Å–µ—Ç–∞
   - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ keywords
   - –ö—Ä–∞—Å–∏–≤—ã–π flow

3. **Frontend —É–ª—É—á—à–µ–Ω–∏—è –ª–µ–Ω—Ç—ã** (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2):
   - –ö–Ω–æ–ø–∫–∏ ‚ù§Ô∏è / üëé
   - –ë–µ–π–¥–∂–∏ "–ü—Ä–æ—á–∏—Ç–∞–Ω–æ" / "–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ"
   - –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –≤–∏–¥
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ sidebar

4. **–û–±–Ω–æ–≤–∏—Ç—å personal scan** (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3):
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ `feed_items`
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å `FeedStorageManager`

5. **Learning Engine** (–§–∞–∑–∞ 2):
   - –ê–Ω–∞–ª–∏–∑ interactions
   - –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `interest_weights`
   - –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏

---

## üìä –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

**Backend:** ‚úÖ 100% –§–∞–∑—ã 1  
**Frontend:** ‚è≥ 0% –§–∞–∑—ã 1  

**–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å MVP+:** 50%

---

## üí™ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –¥–ª—è HeadHunter

1. ‚úÖ **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - production-ready –ø–æ–¥—Ö–æ–¥
2. ‚úÖ **–£–º–Ω–∞—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è** - tracking + learning (infrastructure –≥–æ—Ç–æ–≤–∞)
3. ‚úÖ **–û–Ω–±–æ—Ä–¥–∏–Ω–≥** - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
4. ‚úÖ **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å–≤–æ—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
5. ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - PostgreSQL + indexed queries
6. ‚úÖ **–ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - separation of concerns
7. ‚úÖ **API-first** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å mobile app / Telegram bot

---

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

```
–ù–æ–≤—ã–µ:
‚ú® backend/migrations/001_personal_news_tables.sql (370 —Å—Ç—Ä–æ–∫)
‚ú® backend/modes/personal/feed_storage.py (460 —Å—Ç—Ä–æ–∫)
‚ú® IMPROVEMENTS_PLAN.md (650 —Å—Ç—Ä–æ–∫)
‚ú® PHASE_1_COMPLETED.md (–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏)
‚ú® IMPLEMENTATION_SUMMARY.md (—ç—Ç–æ—Ç —Ñ–∞–π–ª)

–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ:
üìù backend/database.py (+280 —Å—Ç—Ä–æ–∫ –º–æ–¥–µ–ª–µ–π)
üìù backend/api.py (+275 —Å—Ç—Ä–æ–∫ endpoints)
```

---

## üéâ –ò—Ç–æ–≥

**Backend –¥–ª—è —É–º–Ω–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–∞ –Ω–æ–≤–æ—Å—Ç–µ–π –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤!**

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:
- ‚úÖ –ü–æ–ª–Ω–∞—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
- ‚úÖ Tracking –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π
- ‚úÖ –û–Ω–±–æ—Ä–¥–∏–Ω–≥ —Å –ø—Ä–µ—Å–µ—Ç–∞–º–∏
- ‚úÖ –°—Ç–∞—Ç—É—Å—ã –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ 10 –Ω–æ–≤—ã—Ö API endpoints

**–ì–æ—Ç–æ–≤–æ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Frontend!**
